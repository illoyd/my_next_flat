= form_for(@search, html: { class: 'form-inline madlib' }) do |f|

  - if @search.errors.any?
    .panel.panel-danger
      .panel-heading
        %h2.panel-title Oops!
      .panel-body
        = pluralize(@search.errors.count, "error")
        prohibited this search from being saved
      %ul.list-group
        - @search.errors.full_messages.each do |msg|
          %li.list-group-item= msg

  %p{ style: 'font-size: 125%'}
    Save my search as
    = f.label :name, class: 'sr-only'
    = f.text_field :name, class: 'form-control', placeholder: 'search name'
    so I can find it later.

  %p{ style: 'font-size: 125%' }
    = f.label :alert_method, class: 'sr-only'
    = f.select :alert_method, options_for_alert_method, {}, class: 'form-control input-sm'
    me the
    top
    = f.label :top_n, class: 'sr-only'
    = f.text_field :top_n, class: 'form-control input-sm'
    listings every
    = f.label :day_of_week, class: 'sr-only'
    = f.select :day_of_week, options_for_day_of_week, {}, class: 'form-control input-sm'
    at
    = f.label :hour_of_day, class: 'sr-only'
    = f.select :hour_of_day, options_for_hour_of_day, {}, class: 'form-control input-sm'


  .row
    / Locations
    .col-md-6
      .panel.panel-info
        .panel-heading
          %h2.panel-title
            %i.fa.fa-map-marker
            Locations
        %ul.list-group
          = f.fields_for :locations do |builder|
            - render 'location_fields', :f => builder
        .panel-footer
          = @search.locations.count
          locations
          .pull-right
            = link_to_add_fields(f, :locations) do
              %i.fa.fa-plus
              Add

    / Criteria
    .col-md-6
      .panel.panel-info
        .panel-heading
          %h2.panel-title
            %i.fa.fa-check
            Criteria
        %ul.list-group
          = f.fields_for :criterias do |builder|
            - render 'criteria_fields', :f => builder
        .panel-footer
          = @search.criterias.count
          criteria
          .pull-right
            = link_to_add_fields(f, :criterias) do
              %i.fa.fa-plus
              Add

  .row
    .col-md-offset-2.col-md-8= f.submit "Search", class: 'btn btn-success btn-block'
